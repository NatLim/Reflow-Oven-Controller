                 -1   $MODF38X
0000              1   ;--------------------------------------------------------
0000              2   ; Special Function Registers
0000              3   ;--------------------------------------------------------
0000              4   P0             DATA 0x80
0000              5   SP             DATA 0x81
0000              6   DPL            DATA 0x82
0000              7   DPH            DATA 0x83
0000              8   EMI0TC         DATA 0x84
0000              9   EMI0CF         DATA 0x85
0000             10   OSCLCN         DATA 0x86
0000             11   PCON           DATA 0x87
0000             12   TCON           DATA 0x88
0000             13   TMOD           DATA 0x89
0000             14   TL0            DATA 0x8a
0000             15   TL1            DATA 0x8b
0000             16   TH0            DATA 0x8c
0000             17   TH1            DATA 0x8d
0000             18   CKCON          DATA 0x8e
0000             19   PSCTL          DATA 0x8f
0000             20   P1             DATA 0x90
0000             21   TMR3CN         DATA 0x91
0000             22   TMR4CN         DATA 0x91
0000             23   TMR3RLL        DATA 0x92
0000             24   TMR4RLL        DATA 0x92
0000             25   TMR3RLH        DATA 0x93
0000             26   TMR4RLH        DATA 0x93
0000             27   TMR3L          DATA 0x94
0000             28   TMR4L          DATA 0x94
0000             29   TMR3H          DATA 0x95
0000             30   TMR4H          DATA 0x95
0000             31   USB0ADR        DATA 0x96
0000             32   USB0DAT        DATA 0x97
0000             33   SCON           DATA 0x98
0000             34   SCON0          DATA 0x98
0000             35   SBUF           DATA 0x99
0000             36   SBUF0          DATA 0x99
0000             37   CPT1CN         DATA 0x9a
0000             38   CPT0CN         DATA 0x9b
0000             39   CPT1MD         DATA 0x9c
0000             40   CPT0MD         DATA 0x9d
0000             41   CPT1MX         DATA 0x9e
0000             42   CPT0MX         DATA 0x9f
0000             43   P2             DATA 0xa0
0000             44   SPI0CFG        DATA 0xa1
0000             45   SPI0CKR        DATA 0xa2
0000             46   SPI0DAT        DATA 0xa3
0000             47   P0MDOUT        DATA 0xa4
0000             48   P1MDOUT        DATA 0xa5
0000             49   P2MDOUT        DATA 0xa6
0000             50   P3MDOUT        DATA 0xa7
0000             51   IE             DATA 0xa8
0000             52   CLKSEL         DATA 0xa9
0000             53   EMI0CN         DATA 0xaa
0000             54   _XPAGE         DATA 0xaa
0000             55   SBCON1         DATA 0xac
0000             56   P4MDOUT        DATA 0xae
0000             57   PFE0CN         DATA 0xaf
0000             58   P3             DATA 0xb0
0000             59   OSCXCN         DATA 0xb1
0000             60   OSCICN         DATA 0xb2
0000             61   OSCICL         DATA 0xb3
0000             62   SBRLL1         DATA 0xb4
0000             63   SBRLH1         DATA 0xb5
0000             64   FLSCL          DATA 0xb6
0000             65   FLKEY          DATA 0xb7
0000             66   IP             DATA 0xb8
0000             67   CLKMUL         DATA 0xb9
0000             68   SMBTC          DATA 0xb9
0000             69   AMX0N          DATA 0xba
0000             70   AMX0P          DATA 0xbb
0000             71   ADC0CF         DATA 0xbc
0000             72   ADC0L          DATA 0xbd
0000             73   ADC0H          DATA 0xbe
0000             74   SFRPAGE        DATA 0xbf
0000             75   SMB0CN         DATA 0xc0
0000             76   SMB1CN         DATA 0xc0
0000             77   SMB0CF         DATA 0xc1
0000             78   SMB1CF         DATA 0xc1
0000             79   SMB0DAT        DATA 0xc2
0000             80   SMB1DAT        DATA 0xc2
0000             81   ADC0GTL        DATA 0xc3
0000             82   ADC0GTH        DATA 0xc4
0000             83   ADC0LTL        DATA 0xc5
0000             84   ADC0LTH        DATA 0xc6
0000             85   P4             DATA 0xc7
0000             86   TMR2CN         DATA 0xc8
0000             87   TMR5CN         DATA 0xc8
0000             88   REG01CN        DATA 0xc9
0000             89   TMR2RLL        DATA 0xca
0000             90   TMR5RLL        DATA 0xca
0000             91   TMR2RLH        DATA 0xcb
0000             92   TMR5RLH        DATA 0xcb
0000             93   TMR2L          DATA 0xcc
0000             94   TMR5L          DATA 0xcc
0000             95   TMR2H          DATA 0xcd
0000             96   TMR5H          DATA 0xcd
0000             97   SMB0ADM        DATA 0xce
0000             98   SMB1ADM        DATA 0xce
0000             99   SMB0ADR        DATA 0xcf
0000            100   SMB1ADR        DATA 0xcf
0000            101   PSW            DATA 0xd0
0000            102   REF0CN         DATA 0xd1
0000            103   SCON1          DATA 0xd2
0000            104   SBUF1          DATA 0xd3
0000            105   P0SKIP         DATA 0xd4
0000            106   P1SKIP         DATA 0xd5
0000            107   P2SKIP         DATA 0xd6
0000            108   USB0XCN        DATA 0xd7
0000            109   PCA0CN         DATA 0xd8
0000            110   PCA0MD         DATA 0xd9
0000            111   PCA0CPM0       DATA 0xda
0000            112   PCA0CPM1       DATA 0xdb
0000            113   PCA0CPM2       DATA 0xdc
0000            114   PCA0CPM3       DATA 0xdd
0000            115   PCA0CPM4       DATA 0xde
0000            116   P3SKIP         DATA 0xdf
0000            117   ACC            DATA 0xe0
0000            118   XBR0           DATA 0xe1
0000            119   XBR1           DATA 0xe2
0000            120   XBR2           DATA 0xe3
0000            121   IT01CF         DATA 0xe4
0000            122   CKCON1         DATA 0xe4
0000            123   SMOD1          DATA 0xe5
0000            124   EIE1           DATA 0xe6
0000            125   EIE2           DATA 0xe7
0000            126   ADC0CN         DATA 0xe8
0000            127   PCA0CPL1       DATA 0xe9
0000            128   PCA0CPH1       DATA 0xea
0000            129   PCA0CPL2       DATA 0xeb
0000            130   PCA0CPH2       DATA 0xec
0000            131   PCA0CPL3       DATA 0xed
0000            132   PCA0CPH3       DATA 0xee
0000            133   RSTSRC         DATA 0xef
0000            134   B              DATA 0xf0
0000            135   P0MDIN         DATA 0xf1
0000            136   P1MDIN         DATA 0xf2
0000            137   P2MDIN         DATA 0xf3
0000            138   P3MDIN         DATA 0xf4
0000            139   P4MDIN         DATA 0xf5
0000            140   EIP1           DATA 0xf6
0000            141   EIP2           DATA 0xf7
0000            142   SPI0CN         DATA 0xf8
0000            143   PCA0L          DATA 0xf9
0000            144   PCA0H          DATA 0xfa
0000            145   PCA0CPL0       DATA 0xfb
0000            146   PCA0CPH0       DATA 0xfc
0000            147   PCA0CPL4       DATA 0xfd
0000            148   PCA0CPH4       DATA 0xfe
0000            149   VDM0CN         DATA 0xff
0000            150   ;--------------------------------------------------------
0000            151   ; special function bits
0000            152   ;--------------------------------------------------------
0000            153   P0_0           BIT 0x80
0000            154   P0_1           BIT 0x81
0000            155   P0_2           BIT 0x82
0000            156   P0_3           BIT 0x83
0000            157   P0_4           BIT 0x84
0000            158   P0_5           BIT 0x85
0000            159   P0_6           BIT 0x86
0000            160   P0_7           BIT 0x87
0000            161   TF1            BIT 0x8f
0000            162   TR1            BIT 0x8e
0000            163   TF0            BIT 0x8d
0000            164   TR0            BIT 0x8c
0000            165   IE1            BIT 0x8b
0000            166   IT1            BIT 0x8a
0000            167   IE0            BIT 0x89
0000            168   IT0            BIT 0x88
0000            169   P1_0           BIT 0x90
0000            170   P1_1           BIT 0x91
0000            171   P1_2           BIT 0x92
0000            172   P1_3           BIT 0x93
0000            173   P1_4           BIT 0x94
0000            174   P1_5           BIT 0x95
0000            175   P1_6           BIT 0x96
0000            176   P1_7           BIT 0x97
0000            177   S0MODE         BIT 0x9f
0000            178   SCON0_6        BIT 0x9e
0000            179   MCE0           BIT 0x9d
0000            180   REN0           BIT 0x9c
0000            181   TB80           BIT 0x9b
0000            182   RB80           BIT 0x9a
0000            183   TI0            BIT 0x99
0000            184   RI0            BIT 0x98
0000            185   SCON_6         BIT 0x9e
0000            186   MCE            BIT 0x9d
0000            187   REN            BIT 0x9c
0000            188   TB8            BIT 0x9b
0000            189   RB8            BIT 0x9a
0000            190   TI             BIT 0x99
0000            191   RI             BIT 0x98
0000            192   P2_0           BIT 0xa0
0000            193   P2_1           BIT 0xa1
0000            194   P2_2           BIT 0xa2
0000            195   P2_3           BIT 0xa3
0000            196   P2_4           BIT 0xa4
0000            197   P2_5           BIT 0xa5
0000            198   P2_6           BIT 0xa6
0000            199   P2_7           BIT 0xa7
0000            200   EA             BIT 0xaf
0000            201   ESPI0          BIT 0xae
0000            202   ET2            BIT 0xad
0000            203   ES0            BIT 0xac
0000            204   ET1            BIT 0xab
0000            205   EX1            BIT 0xaa
0000            206   ET0            BIT 0xa9
0000            207   EX0            BIT 0xa8
0000            208   P3_0           BIT 0xb0
0000            209   P3_1           BIT 0xb1
0000            210   P3_2           BIT 0xb2
0000            211   P3_3           BIT 0xb3
0000            212   P3_4           BIT 0xb4
0000            213   P3_5           BIT 0xb5
0000            214   P3_6           BIT 0xb6
0000            215   P3_7           BIT 0xb7
0000            216   IP_7           BIT 0xbf
0000            217   PSPI0          BIT 0xbe
0000            218   PT2            BIT 0xbd
0000            219   PS0            BIT 0xbc
0000            220   PT1            BIT 0xbb
0000            221   PX1            BIT 0xba
0000            222   PT0            BIT 0xb9
0000            223   PX0            BIT 0xb8
0000            224   MASTER0        BIT 0xc7
0000            225   TXMODE0        BIT 0xc6
0000            226   STA0           BIT 0xc5
0000            227   STO0           BIT 0xc4
0000            228   ACKRQ0         BIT 0xc3
0000            229   ARBLOST0       BIT 0xc2
0000            230   ACK0           BIT 0xc1
0000            231   SI0            BIT 0xc0
0000            232   MASTER1        BIT 0xc7
0000            233   TXMODE1        BIT 0xc6
0000            234   STA1           BIT 0xc5
0000            235   STO1           BIT 0xc4
0000            236   ACKRQ1         BIT 0xc3
0000            237   ARBLOST1       BIT 0xc2
0000            238   ACK1           BIT 0xc1
0000            239   SI1            BIT 0xc0
0000            240   TF2            BIT 0xcf
0000            241   TF2H           BIT 0xcf
0000            242   TF2L           BIT 0xce
0000            243   TF2LEN         BIT 0xcd
0000            244   TF2CEN         BIT 0xcc
0000            245   T2SPLIT        BIT 0xcb
0000            246   TR2            BIT 0xca
0000            247   T2CSS          BIT 0xc9
0000            248   T2XCLK         BIT 0xc8
0000            249   TF5H           BIT 0xcf
0000            250   TF5L           BIT 0xce
0000            251   TF5LEN         BIT 0xcd
0000            252   TMR5CN_4       BIT 0xcc
0000            253   T5SPLIT        BIT 0xcb
0000            254   TR5            BIT 0xca
0000            255   TMR5CN_1       BIT 0xc9
0000            256   T5XCLK         BIT 0xc8
0000            257   CY             BIT 0xd7
0000            258   AC             BIT 0xd6
0000            259   F0             BIT 0xd5
0000            260   RS1            BIT 0xd4
0000            261   RS0            BIT 0xd3
0000            262   OV             BIT 0xd2
0000            263   F1             BIT 0xd1
0000            264   PARITY         BIT 0xd0
0000            265   CF             BIT 0xdf
0000            266   CR             BIT 0xde
0000            267   PCA0CN_5       BIT 0xde
0000            268   CCF4           BIT 0xdc
0000            269   CCF3           BIT 0xdb
0000            270   CCF2           BIT 0xda
0000            271   CCF1           BIT 0xd9
0000            272   CCF0           BIT 0xd8
0000            273   ACC_7          BIT 0xe7
0000            274   ACC_6          BIT 0xe6
0000            275   ACC_5          BIT 0xe5
0000            276   ACC_4          BIT 0xe4
0000            277   ACC_3          BIT 0xe3
0000            278   ACC_2          BIT 0xe2
0000            279   ACC_1          BIT 0xe1
0000            280   ACC_0          BIT 0xe0
0000            281   AD0EN          BIT 0xef
0000            282   AD0TM          BIT 0xee
0000            283   AD0INT         BIT 0xed
0000            284   AD0BUSY        BIT 0xec
0000            285   AD0WINT        BIT 0xeb
0000            286   AD0CM2         BIT 0xea
0000            287   AD0CM1         BIT 0xe9
0000            288   AD0CM0         BIT 0xe8
0000            289   B_7            BIT 0xf7
0000            290   B_6            BIT 0xf6
0000            291   B_5            BIT 0xf5
0000            292   B_4            BIT 0xf4
0000            293   B_3            BIT 0xf3
0000            294   B_2            BIT 0xf2
0000            295   B_1            BIT 0xf1
0000            296   B_0            BIT 0xf0
0000            297   SPIF           BIT 0xff
0000            298   WCOL           BIT 0xfe
0000            299   MODF           BIT 0xfd
0000            300   RXOVRN         BIT 0xfc
0000            301   NSSMD1         BIT 0xfb
0000            302   NSSMD0         BIT 0xfa
0000            303   TXBMT          BIT 0xf9
0000            304   SPIEN          BIT 0xf8
0000              2   
0000              3   CSEG at 0H
0000 020010       4            ljmp main
0003              5   
0003              6   Wait_half_second:        
0003              7            ;For a 12MHz oscillator one machine cycle 
0003              8            ;takes 1/12.0000MHz=83.333333ns
0003 7A19         9       mov R2, #25
0005 79FA        10   L3:      mov R1, #250
0007 78F0        11   L2:      mov R0, #240
0009 D8FE        12   L1:      djnz R0, L1 ; 4 machine cycles-> 4*83.3333ns*240=80us
000B D9FA        13       djnz R1, L2 ; 80us*250=0.02s
000D DAF6        14       djnz R2, L3 ; 0.02s*25=0.5s
000F 22          15       ret
0010             16       
0010             17   main:
0010 53D9BF      18            anl     PCA0MD,#0xBF  ; DISABLE WDT: clear Watchdog Enable bit
0013 43B203      19            orl     OSCICN, #0x03 ; Configure internal oscillator for its maximum frequency
0016 75817F      20            mov SP, #7FH
0019 43D504      21            orl     P1SKIP,#0x04  ; skip LED pin in crossbar assignments
001C 75E240      22            mov     XBR1,#0x40    ; enable Crossbar
001F 43A508      23            orl     P1MDOUT,#0x08 ; make LED pin output push-pull
0022 43F208      24            orl     P1MDIN,#0x08  ; make LED pin input mode digital
0025             25   M0:
0025 B293        26            cpl P1_3 ; Led off/on
0027 120003      27            lcall Wait_half_second
002A 80F9        28            sjmp M0
002C             29   end
